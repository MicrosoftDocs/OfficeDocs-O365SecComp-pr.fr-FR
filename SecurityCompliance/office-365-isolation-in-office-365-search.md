---
title: Isolation du client Office 365 dans Office 365 Search
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: "Résumé: explication de l'isolation du client dans Office 365 Search."
ms.openlocfilehash: fa9ba75f6ae5b0b89e3565ffb0e6f022ab36f81b
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/23/2019
ms.locfileid: "30216864"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="363e2-103">Isolation du client dans Office 365 Search</span><span class="sxs-lookup"><span data-stu-id="363e2-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="363e2-p101">La recherche SharePoint Online utilise un modèle de séparation des clients qui équilibre l'efficacité des structures de données partagées avec une protection contre la fuite d'informations entre les locataires. Ce modèle empêche les fonctionnalités de recherche de:</span><span class="sxs-lookup"><span data-stu-id="363e2-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="363e2-106">Renvoi de résultats de requête qui contiennent des documents provenant d'autres locataires</span><span class="sxs-lookup"><span data-stu-id="363e2-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="363e2-107">Exposition de suffisamment d'informations dans les résultats de requête pour qu'un utilisateur compétent puisse déduire des informations sur d'autres clients</span><span class="sxs-lookup"><span data-stu-id="363e2-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="363e2-108">Affichage du schéma ou des paramètres d'un autre client</span><span class="sxs-lookup"><span data-stu-id="363e2-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="363e2-109">Le mélange des informations de traitement d'analyse entre les locataires ou les résultats du stockage dans le mauvais client</span><span class="sxs-lookup"><span data-stu-id="363e2-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="363e2-110">Utilisation d'entrées de dictionnaire provenant d'un autre client</span><span class="sxs-lookup"><span data-stu-id="363e2-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="363e2-p102">Pour chaque type de données client, nous utilisons une ou plusieurs couches de protection dans le code pour éviter la fuite accidentelle d'informations. Les données les plus critiques possèdent le plus de couches de protection pour s'assurer qu'un seul défaut ne résulte pas d'une fuite d'informations effective ou perçue.</span><span class="sxs-lookup"><span data-stu-id="363e2-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="363e2-113">Séparation des clients pour l'index de recherche</span><span class="sxs-lookup"><span data-stu-id="363e2-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="363e2-p103">L'index de recherche est stocké sur le disque dans les serveurs hébergeant les composants d'index et les clients partagent les fichiers d'index. Les documents indexés d'un client ne sont visibles que pour les requêtes de ce client. Trois mécanismes indépendants empêchent la fuite d'informations:</span><span class="sxs-lookup"><span data-stu-id="363e2-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="363e2-117">Filtrage des ID de locataire</span><span class="sxs-lookup"><span data-stu-id="363e2-117">Tenant ID filtering</span></span>
- <span data-ttu-id="363e2-118">Préfixe du terme ID client</span><span class="sxs-lookup"><span data-stu-id="363e2-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="363e2-119">Vérifications de liste de contrôle d'accès</span><span class="sxs-lookup"><span data-stu-id="363e2-119">ACL checks</span></span>

<span data-ttu-id="363e2-120">Les trois mécanismes doivent échouer pour que la recherche renvoie des documents au mauvais client.</span><span class="sxs-lookup"><span data-stu-id="363e2-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="363e2-121">Filtrage d'ID de client et préfixe de termes d'ID de client</span><span class="sxs-lookup"><span data-stu-id="363e2-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="363e2-p104">Les préfixes de recherche sont indexés dans l'index de recherche en texte intégral avec l'ID de client. Par exemple, lorsque le terme «*foo*» est indexé pour un client dont l'ID est «*123*», l'entrée dans l'index de texte intégral est «*123foo».*</span><span class="sxs-lookup"><span data-stu-id="363e2-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="363e2-p105">Chaque requête est convertie pour inclure l'ID client à l'aide d'un processus appelé filtrage des ID de locataire. Par exemple, la requête «*foo*» est convertie en «<*GUID*>. *foo* ET *tenantID*: <*GUID*_GT_ ", où <*GUID*> représente le client qui exécute la requête. Cette conversion de requête se produit au sein de chaque nœud d'index, et ni le traitement des requêtes, ni le traitement du contenu ne peuvent l'influencer. Étant donné que l'ID de locataire est ajouté à chaque requête, la fréquence d'un terme dans d'autres clients ne peut pas être déduite en examinant le meilleur classement par correspondance dans un seul client.</span><span class="sxs-lookup"><span data-stu-id="363e2-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="363e2-p106">L'expression de préfixe d'ID de client ne se produit que dans l'index de texte intégral. Les recherches à l'aide de champs, telles que «*title: foo*», permettent d'accéder à un index de recherche synthétique où les termes ne sont pas préfixés par ID de client. Au lieu de cela, les recherches dans les champs sont précédées du nom du champ. Par exemple, la requête «*title: foo*» est convertie en «*Fields. title: foo et Fields. tenantID*: <*GUID*>». Étant donné que la fréquence d'un terme n'influe pas sur le classement des correspondances dans l'index de recherche synthétique, il n'est pas nécessaire de séparer les clients par le préfixe des termes. Pour une recherche*nommée «title: foo*», la séparation de contenu du client dépend du filtrage de l'ID de client par conversion de requête.</span><span class="sxs-lookup"><span data-stu-id="363e2-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="363e2-134">Vérification de la liste de contrôle d'accès des documents</span><span class="sxs-lookup"><span data-stu-id="363e2-134">Document Access Control List Checks</span></span>
<span data-ttu-id="363e2-p107">La recherche contrôle l'accès aux documents via des ACL qui sont enregistrés dans l'index de recherche. Chaque élément est indexé avec un ensemble de termes dans un champ de liste de contrôle d'accès spécial. Le champ ACL contient un terme par groupe ou utilisateur qui peut afficher le document. Chaque requête est complétée par une liste de termes d'entrée de contrôle d'accès (ACE), un pour chaque groupe auquel l'utilisateur authentifié appartient.</span><span class="sxs-lookup"><span data-stu-id="363e2-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="363e2-139">Par exemple, une requête comme «<*GUID*>. *foo et tenantID*: <*GUID*> "devient:" <*GUID*>. *foo et tenantID*:*GUID*> <*et* (*docACL:*<*ace1*> *ou docACL*: <**> Ace2*ou docACL*: <**> ACE3 \*... \*)"</span><span class="sxs-lookup"><span data-stu-id="363e2-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="363e2-p108">Étant donné que les identificateurs d'utilisateurs et de groupes, ainsi que les ACE, sont uniques, ce qui offre un niveau de sécurité supplémentaire entre les clients pour les documents qui ne sont visibles que par certains utilisateurs. Il en est de même pour l'ACE spéciale «tout le monde sauf les utilisateurs externes» qui accorde l'accès aux utilisateurs réguliers dans le client. Toutefois, étant donné que les ACE pour «tout le monde» sont les mêmes pour tous les clients, la séparation des clients pour les documents publics dépend du filtrage de l'ID de client. Les entrées ACE refusées sont également prises en charge. L'augmentation de requête ajoute une clause qui supprime un document du résultat lorsqu'il existe une correspondance avec une ACE Deny.</span><span class="sxs-lookup"><span data-stu-id="363e2-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="363e2-p109">Dans Exchange Online Search, l'index est partitionné sur l'ID de la boîte aux lettres de l'utilisateur individuel au lieu de l'ID de client (ID d'abonnement) comme dans SharePoint Online. Le mécanisme de partitionnement est identique à SharePoint Online, mais il n'y a pas de filtrage ACL.</span><span class="sxs-lookup"><span data-stu-id="363e2-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
