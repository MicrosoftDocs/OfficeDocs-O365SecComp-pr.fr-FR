---
title: Résistance des données Exchange Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: Explication des différents aspects de la résistance des données dans Exchange Online et Office 365.
ms.openlocfilehash: 8d0448a95f010b766faf852a374513a1c2da61fa
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/27/2018
ms.locfileid: "22527996"
---
# <a name="exchange-online-data-resiliency-in-office-365"></a><span data-ttu-id="65c82-103">Résistance des données en ligne Exchange dans Office 365</span><span class="sxs-lookup"><span data-stu-id="65c82-103">Exchange Online Data Resiliency in Office 365</span></span>

## <a name="introduction"></a><span data-ttu-id="65c82-104">Présentation</span><span class="sxs-lookup"><span data-stu-id="65c82-104">Introduction</span></span>
<span data-ttu-id="65c82-p101">Il existe deux types de corruption susceptibles d’affecter une base de données Exchange : physiquement endommagée, qui est généralement dû à des problèmes de configuration matérielle (en particulier, matériel de stockage), et corruption logique, qui se produit en raison d’autres facteurs. En règle générale, il existe deux types de corruption logique qui peut se produire au sein d’une base de données Exchange :</span><span class="sxs-lookup"><span data-stu-id="65c82-p101">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors. Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="65c82-p102">**Corruption logique de base de données** - les correspondances de somme de contrôle de page de base de données, mais les données sur la page est logiquement incorrect. Cela peut se produire lorsque le moteur de base de données (le moteur ESE (Extensible Storage)) tente d’écrire une page de base de données et même si le système d’exploitation renvoie un message de réussite, les données sont soit jamais écrites sur le disque ou si elle est écrite au mauvais endroit. Il est appelé une *perte de vidage*. ESE inclut de nombreuses fonctionnalités et paramètres de sécurité qui sont conçues pour éviter la corruption physique d’une base de données et d’autres scénarios de perte de données. Pour empêcher les vidages perdues de perte de données, ESE inclut un mécanisme de détection de vidage perdues dans la base de données avec une fonctionnalité (restauration d’une page unique) pour corriger le problème.</span><span class="sxs-lookup"><span data-stu-id="65c82-p102">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically. This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place. This is referred to as a *lost flush*. ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios. To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="65c82-p103">**Corruption logique banque** - données est ajouté, supprimé ou manipulé d’une manière qui n’attend pas l’utilisateur. Ces cas sont généralement causées par des applications tierces. Il est généralement uniquement des dommages dans le sens où elle que l’utilisateur s’affiche en tant que corruption. La banque d’informations Exchange considère que la transaction qui a produit la corruption logique à une série d’opérations MAPI valides. Les fonctionnalités de [Blocage sur Place](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) dans Exchange Online offre une protection contre la corruption logique magasin (car elle empêche le contenu d’être définitivement supprimés par un utilisateur ou une application).</span><span class="sxs-lookup"><span data-stu-id="65c82-p103">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect. These cases are generally caused by third-party applications. It's generally only corruption in the sense that the user views it as corruption. The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations. The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="65c82-p104">Exchange Online effectue plusieurs vérifications de cohérence sur les fichiers journaux répliquées pendant l’inspection des journaux et de relecture des journaux. Ces vérifications de cohérence empêchent physiquement endommagée de répliquées par le système. Par exemple, lors de l’inspection de journal, est un contrôle d’intégrité physique qui vérifie le fichier journal et vérifie que la somme de contrôle enregistrée dans le fichier journal correspond à la somme de contrôle généré en mémoire. En outre, l’en-tête du fichier journal est examinée pour vérifier la signature du fichier journal enregistrée dans l’en-tête du journal correspond à celui du fichier journal. Pendant la relecture des journaux, le fichier journal subit davantage de contrôle. Par exemple, l’en-tête de la base de données contient également la signature qui est comparée à la signature du fichier journal pour vous assurer qu’ils correspondent.</span><span class="sxs-lookup"><span data-stu-id="65c82-p104">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay. These consistency checks prevent physical corruption from being replicated by the system. For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory. In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file. During log replay, the log file undergoes further scrutiny. For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="65c82-p105">Protection contre la corruption des données de boîtes aux lettres dans Exchange Online est effectuée à l’aide d’Exchange Native Data Protection, une stratégie de résilience qui tire parti de la réplication au niveau de l’application sur plusieurs serveurs et plusieurs centres de données ainsi que d’autres fonctionnalités qui aident à protéger les données contre la perte en raison de la corruption ou d’autres raisons. Ces fonctionnalités incluent des fonctionnalités natives qui sont gérées par Microsoft ou l’application Exchange Online, tels que :</span><span class="sxs-lookup"><span data-stu-id="65c82-p105">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons. These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="65c82-125">Groupes de disponibilité des données</span><span class="sxs-lookup"><span data-stu-id="65c82-125">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="65c82-126">Correction de bits unique</span><span class="sxs-lookup"><span data-stu-id="65c82-126">Single Bit Correction</span></span> 
- <span data-ttu-id="65c82-127">Base de données d’analyse</span><span class="sxs-lookup"><span data-stu-id="65c82-127">Online Database Scanning</span></span> 
- <span data-ttu-id="65c82-128">Détection de vidage perdue</span><span class="sxs-lookup"><span data-stu-id="65c82-128">Lost Flush Detection</span></span> 
- <span data-ttu-id="65c82-129">Restauration d’une Page unique</span><span class="sxs-lookup"><span data-stu-id="65c82-129">Single Page Restore</span></span> 
- <span data-ttu-id="65c82-130">Service de réplication de boîte aux lettres</span><span class="sxs-lookup"><span data-stu-id="65c82-130">Mailbox Replication Service</span></span> 
- <span data-ttu-id="65c82-131">Vérification des fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="65c82-131">Log File Checks</span></span> 
- <span data-ttu-id="65c82-132">Déploiement sur un système de fichiers résilient</span><span class="sxs-lookup"><span data-stu-id="65c82-132">Deployment on Resilient File System</span></span> 

<span data-ttu-id="65c82-p106">Pour plus d’informations sur les fonctionnalités natives répertoriés ci-dessus, cliquez sur les liens hypertexte ci-dessus et voir ci-dessous pour plus d’informations et pour plus d’informations sur les éléments sans liens hypertexte. Outre ces fonctionnalités natives, Exchange Online inclut également les fonctionnalités de résilience de données que les clients peuvent gérer, telles que :</span><span class="sxs-lookup"><span data-stu-id="65c82-p106">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks. In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="65c82-135">Récupération d’élément unique (activée par défaut)</span><span class="sxs-lookup"><span data-stu-id="65c82-135">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="65c82-136">Conservation inaltérable et conservation pour litige</span><span class="sxs-lookup"><span data-stu-id="65c82-136">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="65c82-137">Rétention des éléments supprimés et boîtes aux lettres Soft-Deleted (les deux activés par défaut)</span><span class="sxs-lookup"><span data-stu-id="65c82-137">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="65c82-138">Groupes de disponibilité de base de données</span><span class="sxs-lookup"><span data-stu-id="65c82-138">Database Availability Groups</span></span> 
<span data-ttu-id="65c82-p107">Chaque base de données de boîtes aux lettres dans Office 365 est hébergée dans un [groupe de disponibilité de base de données (DAG)](https://docs.microsoft.com/exchange/back-up-email) et répliqué dans les centres de données géographiquement distincts dans la même zone. La configuration les plus courantes est quatre copies de base de données dans quatre centres de données ; Toutefois, certains régions ont moins centres de données (bases de données sont répliqués dans trois centres de données en Inde et deux centres de données en Australie et Japon). Mais dans tous les cas, chaque base de données de boîtes aux lettres possède quatre copies sont répartis sur plusieurs centres de données, ce qui garantit que les données de boîte aux lettres sont protégées contre matérielle, logicielle et même des échecs de centre de données.</span><span class="sxs-lookup"><span data-stu-id="65c82-p107">Every mailbox database in Office 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region. The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan). But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="65c82-p108">En dehors de ces quatre exemplaires, trois d'entre eux sont configurés comme étant hautement disponible. La quatrième copie est configurée comme un [retardées de base de données](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). La copie retardée de base de données n’est pas destinée à récupération de boîtes aux lettres individuelles ou de récupération des éléments de boîte aux lettres. Son objectif est de fournir un mécanisme de récupération pour l’événement rare d’une altération logique au niveau du système, d’urgence.</span><span class="sxs-lookup"><span data-stu-id="65c82-p108">Out of these four copies, three of them are configured as highly available. The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery. Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="65c82-p109">Copies de base de données retardée dans Exchange Online sont configurées avec un temps de retard de relecture de fichier journal sept jours. En outre, le Gestionnaire de délai d’attente de relecture Exchange est activé pour fournir la lecture du fichier journal dynamique vers le bas pour les copies retardées autoriser les copies de base de données retardée réparation automatique et de gérer la croissance des fichiers journaux. Bien que retardées utilisés dans Exchange Online copies de base de données, il est important de comprendre qu’ils ne sont pas une sauvegarde point-à-temps garantie. Copies de base de données retardée dans Exchange Online ont un seuil de disponibilité, généralement environ 90 %, en raison des périodes où le disque contenant une copie retardée est perdu en raison de la défaillance du disque, la copie retardée devient une haute disponibilité copier (en raison de la lecture automatique vers le bas), ainsi que file d’attente de relecture que les périodes où la copie retardée de base de données est reconstruire le journal.</span><span class="sxs-lookup"><span data-stu-id="65c82-p109">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time. In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth. Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup. Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="65c82-150">Résilience de transport</span><span class="sxs-lookup"><span data-stu-id="65c82-150">Transport Resilience</span></span> 
<span data-ttu-id="65c82-p110">Exchange Online inclut deux fonctionnalités de résilience de transport principal : filet de sécurité et de redondance des clichés instantanés. Redondance des clichés instantanés conserve une copie d’un message redondante pendant qu’il est en transit. Filet de sécurité conserve une copie redondante d’un message une fois que le message est remis avec succès.</span><span class="sxs-lookup"><span data-stu-id="65c82-p110">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net. Shadow Redundancy keeps a redundant copy of a message while it is in transit. Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="65c82-p111">Avec redondance des clichés instantanés, chaque serveur de transport Exchange Online crée une copie de chaque message qu’il reçoit avant qu’il reconnaît bien reçu le message vers le serveur d’envoi. Ainsi, tous les messages dans le pipeline de transport redondants lors de leur transit. Si Exchange Online détermine que le message d’origine a été perdu en transit, une copie redondante du message est redistribution.</span><span class="sxs-lookup"><span data-stu-id="65c82-p111">With Shadow Redundancy, each Exchange Online transport server makes a copy of each messages it receives before it acknowledges successfully receiving the message to the sending server. This makes all messages in the transport pipeline redundant while in transit. If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="65c82-p112">Filet de sécurité est une file d’attente de transport qui est associé avec le service de Transport sur un serveur de boîtes aux lettres. Cette file d’attente stocke les copies des messages qui ont été correctement traités par le serveur. Lorsqu’une défaillance du serveur ou de base de données de boîtes aux lettres nécessite l’activation d’une copie de la base de données de boîtes aux lettres obsolète, les messages dans la file d’attente filet de sécurité sont automatiquement soumises à la nouvelle copie active de la base de données de boîtes aux lettres. Filet de sécurité est également redondant, ce qui évite de transport comme point de défaillance unique. Il utilise le concept d’un filet de sécurité principale et une ombre Safety Net : si le principal Safety Net n’est pas disponible pendant plus de 12 heures, resoumettre les demandes deviennent des nouvelles demandes de clichés instantanés et les messages sont nouveau remis à partir de l’ombre Safety Net.</span><span class="sxs-lookup"><span data-stu-id="65c82-p112">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server. This queue stores copies of messages that were successfully processed by the server. When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database. Safety Net is also redundant, thereby eliminating transport as a single point of failure. It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="65c82-p113">Nouvelles soumissions message provenant de Safety Net sont automatiquement démarrées par le composant Gestionnaire Active Manager du service de réplication Microsoft Exchange qui gère les boîtes aux lettres et DAG copies de base de données. Aucune action manuelle n’est requis pour resoumettre les messages provenant de Safety Net.</span><span class="sxs-lookup"><span data-stu-id="65c82-p113">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies. No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="65c82-164">Correction de bits unique</span><span class="sxs-lookup"><span data-stu-id="65c82-164">Single Bit Correction</span></span> 
<span data-ttu-id="65c82-p114">ESE inclut un mécanisme de détecter et de résoudre les erreurs CRC bit unique (également appelées retourne verticalement single-bit) qui sont le résultat d’erreurs matérielles (et en tant que telles qu’elles représentent physiquement endommagée). Lorsque ces erreurs se produisent, ESE les corrige automatiquement et consigne un événement dans le journal des événements.</span><span class="sxs-lookup"><span data-stu-id="65c82-p114">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption). When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="65c82-167">Base de données d’analyse</span><span class="sxs-lookup"><span data-stu-id="65c82-167">Online Database Scanning</span></span> 
<span data-ttu-id="65c82-p115">Base de données d’analyse (également appelé *somme de contrôle de base de données*) est le processus où un ESE utilise un vérificateur de cohérence de base de données pour lire chaque page et vérifiez la corruption des pages. Le principal objectif consiste à détecter physiquement endommagée et perdue vide qui ne peut pas être prise détecté par les opérations transactionnelles. Analyse de la base de données effectue également des opérations de magasin après incident. Espace peut être une fuite en raison d’incidents et en ligne de la base de données d’analyse de recherche et récupère l’espace perdu. Le système est conçu dans le but que chaque base de données est analysé entièrement tous les sept jours.</span><span class="sxs-lookup"><span data-stu-id="65c82-p115">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption. The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations. Database scanning also performs post-store crash operations. Space can be leaked due to crashes, and online database scanning finds and recovers lost space. The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="65c82-173">Détection de vidage perdue</span><span class="sxs-lookup"><span data-stu-id="65c82-173">Lost Flush Detection</span></span> 
<span data-ttu-id="65c82-p116">Un vidage perdu se produit lorsqu’une opération d’écriture de base de données que le système d’exploitation/sous-système de disque renvoyé comme terminée pas réellement écrites à disque ou a été écrit à l’emplacement approprié. Perte de vidage des incidents peut résultat dans la logique de base de données, donc pour empêcher des vidages perdues d’entraînant la perte de données, ESE inclut un mécanisme de détection de vidage perdues. Comme les pages de base de données sont écrites dans les copies passives, une vérification est effectuée pour perdues vidages sur la copie active. Si un vidage perdu est détecté, ESE peut réparer le processus à l’aide d’une processus de mise à jour corrective de page.</span><span class="sxs-lookup"><span data-stu-id="65c82-p116">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location. Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism. As database pages are written to passive copies, a check is performed for lost flushes on the active copy. If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="65c82-178">Restauration d’une Page unique</span><span class="sxs-lookup"><span data-stu-id="65c82-178">Single Page Restore</span></span> 
<span data-ttu-id="65c82-p117">Restaurer une page unique, également appelées *mise à jour corrective de page*, est un processus automatique où les pages de base de données endommagée sont remplacés par les copies intègres à partir d’un réplica intègre. Le processus de réparation d’une page endommagé varie selon que la copie de base de données est active ou passive. Lorsqu’une copie de base de données active rencontre une page endommagée, il peut copier une page d’un de ses réplicas, condition la copie de page est complètement à jour. Cette opération s’effectue par le fait de placer une demande de page dans le flux de journal, qui est la base de la réplication de base de données de boîtes aux lettres. Dès qu’un réplica rencontre il répond en envoyant une copie de la page à la copie de base de données émet la demande de page. Restauration d’une page unique fournit également un mécanisme de communication asynchrone pour actif vers une page de la demande à partir de réplicas, même si les réplicas sont actuellement hors connexion.</span><span class="sxs-lookup"><span data-stu-id="65c82-p117">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica. The repair process for a corrupt page depends on whether the database copy is active or passive. When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date. This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication. As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy. Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="65c82-p118">En cas de corruption dans une copie passive de base de données, y compris une copie retardée de base de données, car ces copies sont toujours derrière leur copie active, elle est toujours fiable copier n’importe quelle page de la copie active vers une copie passive. Une copie passive de base de données étant par nature hautement disponible, au cours de la page d’application des correctifs, la relecture du journal est suspendu, mais continue de copie du journal. La copie passive de base de données extrait une copie de la page endommagée la copie active, attend que le fichier journal qui répond à la demande de génération de journaux requis maximal est copié et inspecté, puis correctifs la page endommagée. Une fois que la page a été corrigée, la relecture des journaux reprend. Le processus est le même pour la copie de base de données retardée, sauf que la base de données retardée relit tout d’abord tous les fichiers journaux qui sont nécessaires pour obtenir un état REALISABLES par connexions.</span><span class="sxs-lookup"><span data-stu-id="65c82-p118">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy. A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues. The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page. Once the page has been patched, log replay resumes. The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="65c82-190">Service de réplication de boîte aux lettres</span><span class="sxs-lookup"><span data-stu-id="65c82-190">Mailbox Replication Service</span></span> 
<span data-ttu-id="65c82-p119">Déplacement de boîtes aux lettres est un élément clé de la gestion d’un service de messagerie à grande échelle. Technologies de mise à jour sont toujours et mises à niveau de matériel et de version à gérer, afin d’avoir un robuste, limitées système qui permet à nos ingénieurs effectuer ce travail tout en conservant la boîte aux lettres déplace transparent pour les utilisateurs (en veillant à ce qu’ils restent en ligne tout au long du processus) est la clé et à s’assurer que le processus d’évolution normalement à mesure que les boîtes aux lettres plus en plus grands.</span><span class="sxs-lookup"><span data-stu-id="65c82-p119">Moving mailboxes is a key part of managing a large-scale email service. There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="65c82-p120">Le Service de réplication de boîte aux lettres (MRS) Exchange est responsable du déplacement des boîtes aux lettres entre des bases de données. Pendant le déplacement, MRS effectue une vérification de cohérence sur tous les éléments dans la boîte aux lettres. Si un problème de cohérence est trouvé, MRS sera corriger le problème, soit ignorer les éléments endommagés, supprimant ainsi la corruption à partir de la boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="65c82-p120">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases. During the move, MRS performs a consistency check on all items within the mailbox. If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="65c82-p121">MRS étant un composant d’Exchange Online, nous pouvons modifier dans son code adresse nouvelles formes de corruption détectées à l’avenir. Par exemple, si nous détecte un problème de cohérence MRS n’est pas en mesure de résoudre, nous pouvons analyser la corruption, modifiez le code MRS et corriger les incohérences (si nous savons comment).</span><span class="sxs-lookup"><span data-stu-id="65c82-p121">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future. For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="65c82-198">Vérification des fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="65c82-198">Log File Checks</span></span> 
<span data-ttu-id="65c82-p122">Tous les fichiers journaux des transactions générés par une base de données Exchange sont soumis à plusieurs formulaires de vérifications de cohérence. Lorsqu’un fichier journal est créé, la première chose que terminé est un modèle de bit est écrites et une série d’écritures de journal est alors effectuée. Cela permet d’Exchange Online exécuter une série de contrôles (flush perdue, CRC et autres contrôles) pour valider chaque fichier journal telle qu’elle est écrite et à nouveau lorsqu’elle est répliquée.</span><span class="sxs-lookup"><span data-stu-id="65c82-p122">All transaction log files generated by an Exchange database undergo several forms of consistency checks. When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed. This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="65c82-202">Déploiement sur un système de fichiers résilient</span><span class="sxs-lookup"><span data-stu-id="65c82-202">Deployment on Resilient File System</span></span> 
<span data-ttu-id="65c82-p123">Pour éviter la corruption de se produire au niveau du système de fichiers, Exchange Online est déployé sur des partitions de système de fichiers résilient (ReFS) pour fournir des capacités de récupération améliorées. ReFS est un système de fichiers dans Windows Server 2012 et les versions ultérieures est conçu pour être plus résistants toute corruption des données augmentant l’intégrité et la disponibilité des données. Plus précisément, ReFS apporte des améliorations de la manière que les métadonnées sont mis à jour qui offre une meilleure protection des données et de réduire les cas de données endommagées. Il utilise également les totaux de contrôle pour vérifier l’intégrité des données de fichiers et en vous assurant que corruption des données de métadonnées sont facilement trouvée et réparée.</span><span class="sxs-lookup"><span data-stu-id="65c82-p123">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities. ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity. Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases. It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="65c82-207">Exchange Online tire parti de plusieurs avantages ReFS :</span><span class="sxs-lookup"><span data-stu-id="65c82-207">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="65c82-p124">Plus de résistance de l’intégrité des données signifie moins incidents liés à la corruption des données. Réduction du nombre d’incidents corruption signifie moins le réamorçage de base de données inutiles.</span><span class="sxs-lookup"><span data-stu-id="65c82-p124">More resiliency in data integrity means fewer data corruption incidents. Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="65c82-210">Somme de contrôle en cours d’exécution sur l’activation des détections de corruption, plus rapidement et de façon plus déterministe, permet de corriger les données du client de métadonnées corruption avant grises échecs se produisent sur des volumes de données.</span><span class="sxs-lookup"><span data-stu-id="65c82-210">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="65c82-211">Conçu pour fonctionner avec les très grands ensembles de données : Po et plus grande, sans impact sur les performances</span><span class="sxs-lookup"><span data-stu-id="65c82-211">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="65c82-212">Prise en charge pour les autres fonctionnalités utilisés par Exchange Online, telles que le chiffrement BitLocker.</span><span class="sxs-lookup"><span data-stu-id="65c82-212">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="65c82-213">Exchange Online offre également d’autres fonctionnalités ReFS :</span><span class="sxs-lookup"><span data-stu-id="65c82-213">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="65c82-p125">**L’intégrité (intégrité flux)** - ReFS stocke les données d’une manière qui empêche la plupart des erreurs courantes que vous pouvant normalement entraîner une perte de données. Service de recherche Office 365 utilise des flux de l’intégrité pour faciliter la détection d’altération disque au plus tôt et les totaux de contrôle de contenu de fichier. La fonctionnalité permet également de réduire les incidents corruption provoqués par « Déchiré écrit » (lorsqu’une opération d’écriture ne se termine pas en raison de pannes de courant, etc..).</span><span class="sxs-lookup"><span data-stu-id="65c82-p125">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss. Office 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content. The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="65c82-p126">**Disponibilité (résiduelle)** - ReFS hiérarchise la disponibilité des données. Historiquement, les systèmes de fichiers ont été souvent sensibles à la corruption des données qui nécessite le système doit être mis hors connexion pour réparer. Bien que rares, en cas de corruption, implémente ReFS résiduelle, une fonctionnalité qui supprime les données endommagées de l’espace de noms sur un volume actif et garantit que les données ne sont pas affectées par les données endommagées non réparable. L’application de la fonctionnalité de récupération et isolation de corruption des données sur les volumes de base de données Exchange Online signifie que nous pouvons garder non concernés les bases de données sur un volume endommagé entre le moment de l’action de corruption et la réparation. Cela permet d’augmenter la disponibilité des bases de données qui seraient normalement affectés par ces problèmes de corruption de disque.</span><span class="sxs-lookup"><span data-stu-id="65c82-p126">**Availability (Salvage)** - ReFS prioritizes the availability of data. Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair. Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data. Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action. This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 